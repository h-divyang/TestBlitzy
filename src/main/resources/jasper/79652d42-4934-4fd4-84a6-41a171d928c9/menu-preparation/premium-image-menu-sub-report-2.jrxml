<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.6.final using JasperReports Library version 6.20.6-5c96b6aa8a39ac1dc6b6bea4b81168e16dd39231  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="menu-with-image-2-sub-report" pageWidth="555" pageHeight="942" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isTitleNewPage="true" uuid="a799ccc7-aefb-4b47-8cec-59e60e07dcd2">
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="NO_OF_GUEST" class="java.lang.String" isForPrompting="false"/>
	<parameter name="OOCATION" class="java.lang.String" isForPrompting="false"/>
	<parameter name="DATE_FORMAT" class="java.lang.String" isForPrompting="false"/>
	<parameter name="DATE_TIME_FORMAT" class="java.lang.String" isForPrompting="false"/>
	<parameter name="TIME_ZONE" class="java.lang.String" isForPrompting="false"/>
	<parameter name="PERSON" class="java.lang.String" isForPrompting="false"/>
	<parameter name="SIGN" class="java.lang.String" isForPrompting="false"/>
	<parameter name="PAGE" class="java.lang.String" isForPrompting="false"/>
	<parameter name="OF" class="java.lang.String" isForPrompting="false"/>
	<parameter name="LANG_CODE" class="java.lang.String"/>
	<parameter name="FOR" class="java.lang.String"/>
	<parameter name="RUPEES_SYMBOL" class="java.lang.String"/>
	<queryString>
		<![CDATA[]]>
	</queryString>
	<field name="functionName" class="java.lang.String"/>
	<field name="date" class="java.time.LocalDateTime"/>
	<field name="slogan" class="java.lang.String"/>
	<field name="person" class="java.lang.Long"/>
	<field name="menuItemCategory" class="java.lang.String"/>
	<field name="menuItem" class="java.lang.String"/>
	<field name="functionId" class="java.lang.Long"/>
	<field name="menuItemCategoryImage" class="java.lang.String"/>
	<group name="Function Group" isStartNewPage="true">
		<groupExpression><![CDATA[$F{functionId}]]></groupExpression>
		<groupHeader>
			<band height="24">
				<textField>
					<reportElement isPrintRepeatedValues="false" x="0" y="1" width="554" height="23" forecolor="#000000" uuid="2d67370d-a739-47bc-8184-f5ba857a4af7">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box>
						<pen lineWidth="0.25" lineColor="#000000"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial Unicode MS" size="14" isBold="true" isUnderline="true"/>
						<paragraph leftIndent="2"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{functionName} != null && $F{functionName}.length() > 0 ?
    String.join(" ", Arrays.stream($F{functionName}.toLowerCase().split("\\s+"))
                          .map(word -> word.substring(0, 1).toUpperCase() + word.substring(1))
                          .toArray(String[]::new))
    + "  "
    + java.time.format.DateTimeFormatter.ofPattern($P{DATE_TIME_FORMAT}, Locale.ENGLISH)
        .format($F{date}.atZone(java.time.ZoneId.systemDefault())
                         .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
                         .toLocalDateTime()) + " "
    + ($P{LANG_CODE}.equals("en") ? 
        $P{FOR} +" "+ $F{person} + " " + $P{PERSON} :
        $F{person} + " " + $P{PERSON} + 
            ($P{LANG_CODE}.equals("hi") || $P{LANG_CODE}.equals("gu") ? " " + $P{FOR} : "")
      ) 
: ""]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="finalItemCategory" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{menuItemCategory}]]></groupExpression>
		<groupHeader>
			<band height="27">
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<textField textAdjust="StretchHeight">
					<reportElement x="0" y="7" width="554" height="20" forecolor="#030303" backcolor="#FFFFFF" uuid="023107ad-e11b-4e80-a4a9-9fb29ec297b4">
						<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
						<font fontName="Arial Unicode MS" size="14" isBold="true" isUnderline="true"/>
						<paragraph leftIndent="12"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{menuItemCategory} != null ?
  String.join(" ", Arrays.stream($F{menuItemCategory}.replaceAll("\\s+", " ").toLowerCase().split(" "))
    .filter(word -> !word.isEmpty())
     .map(word -> {
          if (word.startsWith("(")) {
             if (word.length() > 1) {
                  word = "(" + word.substring(1, 2).toUpperCase() + word.substring(2);
              } else {
                  word = "(" + word.toUpperCase(); // Handle case where word is just a single character
              }
              // Wrap in span with smaller font size
              word = "<span style='font-size:8pt'>" + word;
          }
          if (word.endsWith(")")) {
              word = word + "</span>";
          }
          return word;
      })
      .map(word -> {
          // Capitalize first character of each word, unless already capitalized
          if (!word.startsWith("(")) {
              return word.substring(0, 1).toUpperCase() + word.substring(1);
          } else {
              return word;
          }
      })
    .toArray(String[]::new)) : "").replaceFirst("Rupees_symbol", $P{RUPEES_SYMBOL})]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<title>
		<band height="1">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</band>
	</title>
	<pageHeader>
		<band height="50"/>
	</pageHeader>
	<detail>
		<band height="70">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<image scaleImage="RetainShape" hAlign="Center" vAlign="Middle" onErrorType="Icon">
				<reportElement isPrintRepeatedValues="false" x="238" y="0" width="70" height="70" isRemoveLineWhenBlank="true" uuid="aeba2ed1-939b-4050-8c09-94c59f4328e3">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<imageExpression><![CDATA[$F{menuItemCategoryImage}]]></imageExpression>
			</image>
		</band>
		<band height="23" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField textAdjust="StretchHeight">
				<reportElement mode="Transparent" x="0" y="0" width="555" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="c3ca1ee1-f12f-497e-8775-03b19573c249">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom" markup="html">
					<font fontName="Arial Unicode MS" size="13" isBold="false" isItalic="false" isUnderline="false"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{menuItem} != null ?
  String.join(" ", Arrays.stream($F{menuItem}.replaceAll("\\s+", " ").toLowerCase().split(" "))
    .filter(word -> !word.isEmpty())
     .map(word -> {
          if (word.startsWith("(")) {
             if (word.length() > 1) {
                  word = "(" + word.substring(1, 2).toUpperCase() + word.substring(2);
              } else {
                  word = "(" + word.toUpperCase(); // Handle case where word is just a single character
              }
              // Wrap in span with smaller font size
              word = "<span style='font-size:8pt'>" + word;
          }
          if (word.endsWith(")")) {
              word = word + "</span>";
          }
          return word;
      })
      .map(word -> {
          // Capitalize first character of each word, unless already capitalized
          if (!word.startsWith("(")) {
              return word.substring(0, 1).toUpperCase() + word.substring(1);
          } else {
              return word;
          }
      })
    .toArray(String[]::new)) : "").replaceFirst("Rupees_symbol", $P{RUPEES_SYMBOL})]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
