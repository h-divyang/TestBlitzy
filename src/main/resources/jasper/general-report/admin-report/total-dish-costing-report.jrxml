<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.6.final using JasperReports Library version 6.20.6-5c96b6aa8a39ac1dc6b6bea4b81168e16dd39231  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="total-dish-costing-report" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="570f6877-f4d0-46ed-af0d-887dc6088dac">
	<parameter name="TITLE" class="java.lang.String" isForPrompting="false"/>
	<parameter name="LOGO" class="java.lang.String" isForPrompting="false"/>
	<parameter name="FUNCTION" class="java.lang.String" isForPrompting="false"/>
	<parameter name="DATE_AND_TIME" class="java.lang.String" isForPrompting="false"/>
	<parameter name="GRAND_TOTAL" class="java.lang.String"/>
	<parameter name="DISH_COSTING" class="java.lang.String"/>
	<parameter name="CHARGES" class="java.lang.String"/>
	<parameter name="TOTAL" class="java.lang.String"/>
	<parameter name="DATE_TIME_FORMAT" class="java.lang.String" isForPrompting="false"/>
	<parameter name="TIME_ZONE" class="java.lang.String" isForPrompting="false"/>
	<parameter name="DECIMAL_LIMIT_FOR_CURRENCY" class="java.lang.String" isForPrompting="false"/>
	<parameter name="TO" class="java.lang.String"/>
	<parameter name="TIME_FORMAT" class="java.lang.String"/>
	<parameter name="GENERAL_REPORT_BACKGROUND_IMAGE" class="java.lang.String" isForPrompting="false"/>
	<queryString>
		<![CDATA[]]>
	</queryString>
	<field name="functionName" class="java.lang.String"/>
	<field name="grandTotal" class="java.lang.Double"/>
	<field name="dishCosting" class="java.lang.Double"/>
	<field name="date" class="java.time.LocalDateTime"/>
	<field name="endDate" class="java.time.LocalDateTime"/>
	<variable name="GRAND_TOTAL" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{grandTotal}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="TOTAL_DISH_COSTING" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{dishCosting}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<background>
		<band height="842" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<image scaleImage="FillFrame">
				<reportElement x="0" y="0" width="595" height="842" uuid="b3e77bb1-2119-459a-8b92-2133aa276338">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<imageExpression><![CDATA[$P{GENERAL_REPORT_BACKGROUND_IMAGE}]]></imageExpression>
			</image>
		</band>
	</background>
	<title>
		<band height="88" splitType="Stretch">
			<textField>
				<reportElement mode="Transparent" x="140" y="30" width="300" height="30" backcolor="#7D7D7D" uuid="0b55bdb8-e426-446b-92e4-038b3a7093b7">
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
					<font fontName="Arial Unicode MS" size="17" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{TITLE}]]></textFieldExpression>
			</textField>
			<image scaleImage="RetainShape" hAlign="Center" onErrorType="Blank">
				<reportElement x="460" y="10" width="110" height="78" isRemoveLineWhenBlank="true" uuid="d00a71f3-49dd-4148-a5f8-30582b48a9ca">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<imageExpression><![CDATA[$P{LOGO}]]></imageExpression>
			</image>
		</band>
	</title>
	<columnHeader>
		<band height="42" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="20" y="20" width="140" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="86925926-9af2-4d4d-81ce-52b66cf76f41">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FUNCTION}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="160" y="20" width="140" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="d750da44-b23d-4118-9f78-34197855c41a">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{DATE_AND_TIME}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="300" y="20" width="140" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="9c214c79-a1b7-469b-9ed7-7d35d4f0df21">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="true"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{TOTAL}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="440" y="20" width="133" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="56311c6f-0025-4c7b-afe5-656d86232f14">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="true"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{DISH_COSTING}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="22" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="20" y="0" width="140" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="e107ef5d-031b-4348-845f-ba13fb1fee74">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="false"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{functionName}]]></textFieldExpression>
			</textField>
			<textField textAdjust="StretchHeight" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="160" y="0" width="140" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="6f803b5a-89ff-4a4a-b092-ed291ff9c70e">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="false"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{endDate} == null ? 
    // Case 1: No end date - just format the start date
    java.time.format.DateTimeFormatter
        .ofPattern($P{DATE_TIME_FORMAT}, Locale.ENGLISH)
        .format($F{date}
            .atZone(java.time.ZoneId.systemDefault())
            .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
            .toLocalDateTime()
        ) 
    : 
    // Case 2: Check if dates are the same
    $F{date}
        .atZone(java.time.ZoneId.systemDefault())
        .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
        .toLocalDate()
        .equals($F{endDate}
                .atZone(java.time.ZoneId.systemDefault())
                .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
                .toLocalDate()) ? 
        // Case 2a: Same date - show start datetime and end time only, with extra spacing
        java.time.format.DateTimeFormatter
            .ofPattern($P{DATE_TIME_FORMAT}, Locale.ENGLISH)
            .format($F{date}
                .atZone(java.time.ZoneId.systemDefault())
                .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
                .toLocalDateTime()) 
            + " " + $P{TO} + java.time.format.DateTimeFormatter
                .ofPattern($P{TIME_FORMAT}, Locale.ENGLISH)
                .format($F{endDate}
                    .atZone(java.time.ZoneId.systemDefault())
                    .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
                    .toLocalDateTime()): 
        // Case 2b: Different dates - show both full datetimes
        java.time.format.DateTimeFormatter
            .ofPattern($P{DATE_TIME_FORMAT}, Locale.ENGLISH)
            .format($F{date}
                .atZone(java.time.ZoneId.systemDefault())
                .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
                .toLocalDateTime()
            )
            + "\n               " + $P{TO} + "  \n"
            + java.time.format.DateTimeFormatter
                .ofPattern($P{DATE_TIME_FORMAT}, Locale.ENGLISH)
                .format($F{endDate}
                    .atZone(java.time.ZoneId.systemDefault())
                    .withZoneSameInstant(java.time.ZoneId.of($P{TIME_ZONE}))
                    .toLocalDateTime()
                )]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="300" y="0" width="140" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="8218c30a-87c9-4aa0-ac3a-eb0611106c23">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="false"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[new DecimalFormat($P{DECIMAL_LIMIT_FOR_CURRENCY}).format($F{grandTotal})]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="ContainerHeight" x="440" y="0" width="133" height="22" isRemoveLineWhenBlank="true" forecolor="#000000" uuid="241797b6-aa8d-4452-bd85-0447b998f40e">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="false"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[new DecimalFormat($P{DECIMAL_LIMIT_FOR_CURRENCY}).format($F{dishCosting})]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</band>
	</pageFooter>
	<summary>
		<band height="22" splitType="Stretch">
			<textField>
				<reportElement positionType="Float" stretchType="ContainerHeight" x="300" y="0" width="140" height="22" uuid="241797b6-aa8d-4452-bd85-0447b998f40e">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="false"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[new DecimalFormat($P{DECIMAL_LIMIT_FOR_CURRENCY}).format($V{GRAND_TOTAL})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" stretchType="ContainerHeight" x="20" y="0" width="280" height="22" uuid="9bbd6bc5-2c74-4cae-a458-dd54c06d2c8b">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="true"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{GRAND_TOTAL}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" stretchType="ContainerHeight" x="440" y="0" width="133" height="22" uuid="df635dc3-f617-4a2b-b5f2-4e282a347adc">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="12" isBold="false"/>
					<paragraph leftIndent="5" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[new DecimalFormat($P{DECIMAL_LIMIT_FOR_CURRENCY}).format($V{TOTAL_DISH_COSTING})]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
